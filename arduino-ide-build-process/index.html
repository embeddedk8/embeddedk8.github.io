<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Arduino Internals: how Arduino IDE builds your code - Embedded Kate Blog</title><meta name="Description" content="Step by step guide to how the Arduino IDE builds the code — preprocessing, compiling, and linking explained simply"><meta property="og:url" content="https://embeddedk8.com/arduino-ide-build-process/">
  <meta property="og:site_name" content="Embedded Kate Blog">
  <meta property="og:title" content="Arduino Internals: how Arduino IDE builds your code">
  <meta property="og:description" content="Step by step guide to how the Arduino IDE builds the code — preprocessing, compiling, and linking explained simply">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-09-13T15:58:26+08:00">
    <meta property="article:modified_time" content="2025-10-20T12:28:16+02:00">
    <meta property="article:tag" content="Arduino Internals">
    <meta property="og:image" content="https://embeddedk8.com/arduino-ide-build-process/featured-image.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://embeddedk8.com/arduino-ide-build-process/featured-image.png">
  <meta name="twitter:title" content="Arduino Internals: how Arduino IDE builds your code">
  <meta name="twitter:description" content="Step by step guide to how the Arduino IDE builds the code — preprocessing, compiling, and linking explained simply">
      <meta name="twitter:site" content="@EmbeddedKate">
<meta name="application-name" content="embeddedk8">
<meta name="apple-mobile-web-app-title" content="embeddedk8"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://embeddedk8.com/arduino-ide-build-process/" /><link rel="next" href="https://embeddedk8.com/arduino-cli-compilation/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><meta name="google-site-verification" content="KQs-mbFpniq1Quu9zS0toW7fVI-WR14K_Gy3ljZlFUQ" /><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Arduino Internals: how Arduino IDE builds your code",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/embeddedk8.com\/arduino-ide-build-process\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/embeddedk8.com\/arduino-ide-build-process\/featured-image.png",
                            "width":  1366 ,
                            "height":  435 
                        }],"genre": "posts","keywords": "Arduino Internals","wordcount":  2670 ,
        "url": "https:\/\/embeddedk8.com\/arduino-ide-build-process\/","datePublished": "2025-09-13T15:58:26+08:00","dateModified": "2025-10-20T12:28:16+02:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Embedded Kate Blog","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/embeddedk8.com\/images\/avatar.png",
                    "width":  1080 ,
                    "height":  1080 
                }},"author": {
                "@type": "Person",
                "name": "embeddedk8"
            },"description": "Step by step guide to how the Arduino IDE builds the code — preprocessing, compiling, and linking explained simply"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Embedded Kate Blog"><span class="header-title-pre"><i class='fa-solid fa-microchip fa-fw' aria-hidden='true'></i></span>Embedded Kate Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://github.com/embeddedk8" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/arduino-ide-build-process/" selected>English</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Embedded Kate Blog"><span class="header-title-pre"><i class='fa-solid fa-microchip fa-fw' aria-hidden='true'></i></span>Embedded Kate Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://github.com/embeddedk8" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/arduino-ide-build-process/" selected>English</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Arduino Internals: how Arduino IDE builds your code</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://embeddedk8.com" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>embeddedk8</a></span>&nbsp;<span class="post-category">included in <a href="/categories/arduino-internals/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Arduino Internals</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2025-09-13">2025-09-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;2670 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;13 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/arduino-ide-build-process/featured-image.png"
        data-srcset="/arduino-ide-build-process/featured-image.png, /arduino-ide-build-process/featured-image.png 1.5x, /arduino-ide-build-process/featured-image.png 2x"
        data-sizes="auto"
        alt="/arduino-ide-build-process/featured-image.png"
        title="Step by step guide to how the Arduino IDE builds the code — preprocessing, compiling, and linking explained simply" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#what-you-will-learn">What you will learn?</a></li>
    <li><a href="#lets-get-started">Let&rsquo;s get started!</a>
      <ul>
        <li><a href="#build-an-example-sketch">Build an example sketch</a></li>
        <li><a href="#enable-verbose-output">Enable verbose output</a></li>
      </ul>
    </li>
    <li><a href="#board-and-package-identification">Board and package identification</a></li>
    <li><a href="#arduino-specific-directories">Arduino specific directories</a>
      <ul>
        <li><a href="#arduino15-directory">Arduino15 directory</a></li>
        <li><a href="#arduino-core">Arduino core</a></li>
        <li><a href="#build-directory">Build directory</a></li>
      </ul>
    </li>
    <li><a href="#general-embedded-software-build-process">General embedded software build process</a></li>
    <li><a href="#preprocessing">Preprocessing</a>
      <ul>
        <li><a href="#concatenating-ino-files">Concatenating .ino files</a></li>
        <li><a href="#detecting-libraries-used">Detecting libraries used</a></li>
        <li><a href="#generating-function-prototypes">Generating function prototypes</a></li>
      </ul>
    </li>
    <li><a href="#compilation">Compilation</a>
      <ul>
        <li><a href="#sketch-compilation">Sketch compilation</a></li>
        <li><a href="#compiling-libraries">Compiling libraries</a></li>
        <li><a href="#compiling-core">Compiling core</a></li>
      </ul>
    </li>
    <li><a href="#linking-everything-together">Linking everything together</a></li>
    <li><a href="#finalizing-build">Finalizing build</a>
      <ul>
        <li><a href="#creating-binary-and-hex-files">Creating binary and hex files</a></li>
        <li><a href="#measuring-the-program-size">Measuring the program size</a></li>
        <li><a href="#cleaning-the-build">Cleaning the build</a></li>
      </ul>
    </li>
    <li><a href="#more-reading">More reading</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>As an embedded developer, you probably can&rsquo;t help wondering what actually happens when Arduino IDE builds the sketch.
What’s being compiled, where the files go, and how the toolchain turns the code into instructions able to run on the board?</p>
<p>You hit the spot! We’re about to take a closer look at the Arduino build process.</p>
<p>While building an Arduino sketch in the IDE seems as simple as clicking one button,
under the hood it performs several important steps — some common to nearly every embedded development environment,
and others unique to Arduino.</p>
<p>Understanding this process is a great way to move beyond the beginner stage and start thinking like an embedded developer.</p>
<h1 id="understanding-arduino-ide-build-process">Understanding Arduino IDE build process</h1>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Assumed knowledge<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">I assume you already know how to compile and flash an Arduino board with the Arduino IDE, but haven’t yet dived into the internals of the compilation and flashing process.</div>
        </div>
    </div>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>My setup<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>Arduino UNO R4 WiFi board</li>
<li>Arduino IDE  2.3.6</li>
<li>Linux Mint</li>
</ul>
<p>If you’re using a different board, IDE version, or operating system — don’t worry! You can still follow along. Some details may just look a little different on your setup.</p></div>
        </div>
    </div>
<h2 id="what-you-will-learn">What you will learn?</h2>
<p>After reading this article, you will:</p>
<ul>
<li>understand the standard build flow in embedded software development,</li>
<li>learn about the additional steps performed during the Arduino build process,</li>
<li>know where to find the build files and caches.</li>
</ul>
<h2 id="lets-get-started">Let&rsquo;s get started!</h2>
<p>Let&rsquo;s build a sketch together and go step through the build process.
We’ll pretend we know nothing and analyze the build output to infer what the Arduino IDE actually did.</p>
<h3 id="build-an-example-sketch">Build an example sketch</h3>
<p>Open the Arduino IDE and select the correct board from <strong>Select Board</strong> menu.
In my case it&rsquo;s <strong>Arduino UNO R4 WiFi</strong>.</p>
<p>Load the Blink example and save the sketch in your sketchbook.
Then, to trigger the build, click <strong>Verify/Compile</strong> and observe the <strong>Output</strong> window.</p>
<p>It looks that the sketch has been built successfully and
is ready to upload to the board. The message contains just two lines because I haven’t changed the Arduino IDE’s default settings yet — by default, most of the build output is hidden.</p>
<p><a href="/arduino-ide-build-process/arduino-ide-default-output.png" rel=""><figure><a class="lightgallery" href="/arduino-ide-build-process/arduino-ide-default-output.png" title="Arduino IDE doesn&rsquo;t say much about compilation steps by default" data-thumbnail="/arduino-ide-build-process/arduino-ide-default-output.png" data-sub-html="<h2>Arduino IDE - default build output</h2><p>Arduino IDE doesn&rsquo;t say much about compilation steps by default</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/arduino-ide-build-process/arduino-ide-default-output.png"
            data-srcset="/arduino-ide-build-process/arduino-ide-default-output.png, /arduino-ide-build-process/arduino-ide-default-output.png 1.5x, /arduino-ide-build-process/arduino-ide-default-output.png 2x"
            data-sizes="auto"
            alt="/arduino-ide-build-process/arduino-ide-default-output.png" width="1284" height="748" />
    </a><figcaption class="image-caption">Arduino IDE - default build output</figcaption>
    </figure></a></p>
<h3 id="enable-verbose-output">Enable verbose output</h3>
<p>To understand the build process better we need to enable the <strong>verbose output</strong> in IDE.
To do so, go to <strong>File-&gt; Preferences</strong> and check <strong>Show verbose output</strong> setting for both compiling and upload. When you compile again,
the output will be complete.
Let’s break it down to atoms!
<br></p>
<p><a href="/arduino-ide-build-process/arduino-ide-verbose-output.png" rel=""><figure><a class="lightgallery" href="/arduino-ide-build-process/arduino-ide-verbose-output.png" title="Verbose compilation output in Arduino IDE" data-thumbnail="/arduino-ide-build-process/arduino-ide-verbose-output.png" data-sub-html="<h2>Arduino IDE - verbose build output</h2><p>Verbose compilation output in Arduino IDE</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/arduino-ide-build-process/arduino-ide-verbose-output.png"
            data-srcset="/arduino-ide-build-process/arduino-ide-verbose-output.png, /arduino-ide-build-process/arduino-ide-verbose-output.png 1.5x, /arduino-ide-build-process/arduino-ide-verbose-output.png 2x"
            data-sizes="auto"
            alt="/arduino-ide-build-process/arduino-ide-verbose-output.png" width="1280" height="749" />
    </a><figcaption class="image-caption">Arduino IDE - verbose build output</figcaption>
    </figure></a></p>
<h2 id="board-and-package-identification">Board and package identification</h2>
<p>In embedded software development, the compilation process is always target-dependent.
Each hardware architecture — such as ARM or AVR — requires its own dedicated toolchain.
That&rsquo;s why the first lines in <strong>Output</strong> are identifying the board.</p>
<p>Before the build process starts, Arduino environment checks which board you are using,
based on what you have selected in <strong>Select Board</strong> menu.
Thanks to this, the compiled code will match the board’s architecture, hardware, pin mapping etc.</p>
<p>This board identity is called <strong>FQBN (Fully Qualified Board Name)</strong> and looks as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">FQBN: arduino:renesas_uno:unor4wifi
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>FQBN</strong> is unique for each board. It consists of three segments:</p>
<ul>
<li>Vendor: <code>arduino</code> (<em>it&rsquo;s official Arduino package</em>)</li>
<li>Architecture: <code>renesas_uno</code> (<em>Renesas-based boards family</em>)</li>
<li>Board: <code>unor4wifi</code> (<em>exact model: Arduino Uno R4 WiFi</em>).</li>
</ul>
<p>If you choose wrong board, the code may compile but fail at runtime, or compilation may fail.</p>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Tip<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Error <code>Compilation error: Missing FQBN (Fully Qualified Board Name)</code> means you have not selected any board from menu.</div>
        </div>
    </div>
<h2 id="arduino-specific-directories">Arduino specific directories</h2>
<p>It’s also useful to know where the compilation artifacts end up and where the packages
used for building a specific target are stored. This isn’t immediately obvious, since these files are
placed in several hidden directories. However, their locations can be found
in the build log. Let’s take a quick look at these directories.</p>
<h3 id="arduino15-directory">Arduino15 directory</h3>
<p><strong>Arduino15</strong> contains user preferences, downloaded board packages
(cores, toolchains, board definitions) and libraries that Arduino automatically installs. The
<a href="https://support.arduino.cc/hc/en-us/articles/360018448279-Open-the-Arduino15-folder" target="_blank" rel="noopener noreffer ">exact location depends on your operating system</a>.</p>
<p>Files related to the target board
can be found in the path displayed in the build log under the <strong>FQBN</strong>, for example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Using board &#39;unor4wifi&#39; from platform in folder: /home/kate/.arduino15/packages/arduino/hardware/renesas_uno/1.4.1
</span></span><span class="line"><span class="cl">Using core &#39;arduino&#39; from platform in folder: /home/kate/.arduino15/packages/arduino/hardware/renesas_uno/1.4.1
</span></span></code></pre></td></tr></table>
</div>
</div><p>There are several interesting files in this directory.
One of them is <a href="https://arduino.github.io/arduino-cli/1.3/platform-specification/#boardstxt" target="_blank" rel="noopener noreffer ">boards.txt</a> file, which lists all boards supported by that platform.
Each board has its own section with key-value pairs that define how to compile, upload, and debug for that target.</p>
<p>Here’s the entry for the <strong>Arduino UNO R4 WiFi</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1">##############################################################</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">Arduino</span> <span class="n">UNO</span> <span class="n">R4</span> <span class="n">WiFi</span>
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">core</span><span class="o">=</span><span class="n">arduino</span>
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">crossprefix</span><span class="o">=</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span>
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">compiler_path</span><span class="o">=</span><span class="p">{</span><span class="n">runtime</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="n">gcc</span><span class="o">-</span><span class="mi">7</span><span class="o">-</span><span class="mi">2017</span><span class="n">q4</span><span class="o">.</span><span class="n">path</span><span class="p">}</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">variant</span><span class="o">=</span><span class="n">UNOWIFIR4</span>
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">mcu</span><span class="o">=</span><span class="n">cortex</span><span class="o">-</span><span class="n">m4</span>
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">architecture</span><span class="o">=</span><span class="n">cortex</span><span class="o">-</span><span class="n">m4</span>
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">fpu</span><span class="o">=-</span><span class="n">mfpu</span><span class="o">=</span><span class="n">fpv4</span><span class="o">-</span><span class="n">sp</span><span class="o">-</span><span class="n">d16</span>
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">build</span><span class="o">.</span><span class="n">float</span><span class="o">-</span><span class="n">abi</span><span class="o">=-</span><span class="n">mfloat</span><span class="o">-</span><span class="n">abi</span><span class="o">=</span><span class="n">hard</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">unor4wifi</span><span class="o">.</span><span class="n">upload</span><span class="o">.</span><span class="k">tool</span><span class="o">=</span><span class="n">bossac</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Thanks to those settings, once you select your board from the <strong>Select Board</strong> menu,
the correct toolchain, compiler flags (such as MCU type and clock speed) and upload tool are selected automatically.</p>
<p><strong>Toolchain</strong></p>
<p><strong>Arduino15</strong> also contains the toolchain:<code>.arduino15/packages/arduino/tools/arm-none-eabi-gcc/7-2017q4/bin/</code>.
Besides the compiler itself, toolchain contains other useful tools like <code>objdump</code>. We will use it later!</p>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Do you want to move Arduino15 folder?<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>In some cases, you may want to move the <strong>Arduino15 folder</strong> —  for example, to free up space on your primary drive.</p>
<p>To do this:</p>
<ol>
<li>
<p>Copy the <strong>Arduino15</strong> directory to your desired location.</p>
</li>
<li>
<p>Open the file <code>~/.arduinoIDE/arduino-cli.yaml</code> and update the <code>directories:data</code> path, for example:</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">board_manager:
</span></span><span class="line"><span class="cl">    additional_urls: []
</span></span><span class="line"><span class="cl">directories:
</span></span><span class="line"><span class="cl">    data: /home/kate/new-location-arduino15
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>
<p>Restart the Arduino IDE. It will now use the new <strong>Arduino15</strong> location. Verify the build output to ensure everything is working correctly.</p>
</li>
<li>
<p>Once you’ve confirmed everything works correctly, you can safely delete the old folder.</p>
</li>
</ol>
</div>
        </div>
    </div>
<h3 id="arduino-core">Arduino core</h3>
<p>The <strong>Arduino core</strong> directory provides the hardware-specific implementation of core Arduino functions.</p>
<p>It is located in the <code>cores</code> subdirectory of your board package, for example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">.arduino15/packages/arduino/hardware/renesas_uno/1.4.1/cores/
</span></span></code></pre></td></tr></table>
</div>
</div><p>Each board family, or platform, has its own core,
tailored to the hardware and peripherals.</p>
<p>The <strong>Arduino core</strong> contains, among other files:</p>
<ul>
<li><code>main.cpp</code> — defines the startup code that runs before your <code>setup()</code> function and repeatedly calls your <code>loop()</code> function,</li>
<li><code>Arduino.h</code> header — the main header file included by all sketches,</li>
<li>implementation of interrupts, UART communication, timing functions like <code>delay</code> and other low-level routines.</li>
</ul>
<p>Open the <code>main.cpp</code> and browse the logic that Arduino is adding around the code you implemented in the sketch.</p>
<h3 id="build-directory">Build directory</h3>
<p>When you compile a sketch, the build artifacts (i.e. intermediate object files) are not stored
in the same directory as your source code. It would make a mess inside your sketch folder,
or even made conflicts when building the same sketch for different boards.</p>
<p>That&rsquo;s why build files are always stored in separate build directory.</p>
<p>In case of Arduino IDE, the build directory is a per-sketch cache, created in a hidden folder.</p>
<p>You can find the path to this build directory in the build log. My sketch was built here:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/home/kate/.cache/arduino/sketches/D7CC1D7CA645BCFE67207C07A05B3A2A/sketch/`.
</span></span></code></pre></td></tr></table>
</div>
</div><p>If you open this folder, you’ll see the build artifacts, including:</p>
<ul>
<li>object files (<code>.o</code>),</li>
<li>preprocessed sources (<code>.cpp</code>),</li>
<li>final binaries (<code>.bin</code>, <code>.hex</code>, <code>.elf</code>).</li>
</ul>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>Exporting Compiled Binary<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">If you want to have the compiled binaries in your sketch folder, click <strong>Sketch → Export Compiled Binary</strong> option from Arduino IDE menu.
This will build your sketch and place a copy of the <code>.hex</code>, <code>.bin</code>, <code>.elf</code> and <code>.map</code> inside the sketch sources
folder so it’s easy to find later.</div>
        </div>
    </div>
<p>We already discussed board identification and the Arduino specific directories. Let&rsquo;s move to actual build process.</p>
<h2 id="general-embedded-software-build-process">General embedded software build process</h2>
<p>At a high level, the Arduino build process is essentially a C++ build process adapted
for embedded targets, and with some Arduino specific features. The general C/C++ build pipeline is presented below:
<a href="/arduino-ide-build-process/general-c-build-process.png" rel=""><figure><a class="lightgallery" href="/arduino-ide-build-process/general-c-build-process.png" title="General C/C&#43;&#43; build process" data-thumbnail="/arduino-ide-build-process/general-c-build-process.png" data-sub-html="<h2>General C/C&#43;&#43; build process</h2><p>General C/C&#43;&#43; build process</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/arduino-ide-build-process/general-c-build-process.png"
            data-srcset="/arduino-ide-build-process/general-c-build-process.png, /arduino-ide-build-process/general-c-build-process.png 1.5x, /arduino-ide-build-process/general-c-build-process.png 2x"
            data-sizes="auto"
            alt="/arduino-ide-build-process/general-c-build-process.png" width="1092" height="542" />
    </a><figcaption class="image-caption">General C/C++ build process</figcaption>
    </figure></a></p>
<h2 id="preprocessing">Preprocessing</h2>
<p>The first phase of every C/C++ program build is preprocessing.
In general, preprocessor expands macros like <code>#include</code>, <code>#define</code>, and conditional compilation (<code>#if</code>, <code>#ifdef</code>, etc.).
The output is a single expanded source file.
In Arduino, some additional steps are added around preprocessing stage.</p>
<h3 id="concatenating-ino-files">Concatenating .ino files</h3>
<p>If the sketch contains of multiple <code>.ino</code> files, they are first concatenated into a single <code>.cpp</code> file.</p>
<h3 id="detecting-libraries-used">Detecting libraries used</h3>
<p>Arduino uses a special build recipe (<code>recipe.preproc.macros</code> <a href="https://docs.arduino.cc/arduino-cli/platform-specification/" target="_blank" rel="noopener noreffer ">[1]</a>)
to detect which libraries are required by your sketch.
During this step, the preprocessor scans the sketch for <code>#include</code>s that reference library header files.
If a matching header is found, the corresponding library is automatically marked as needed and included in the build process.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">Detecting</span> <span class="n">libraries</span> <span class="n">used</span><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kate</span><span class="o">/.</span><span class="n">arduino15</span><span class="o">/</span><span class="n">packages</span><span class="o">/</span><span class="n">arduino</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="n">gcc</span><span class="o">/</span><span class="mi">7</span><span class="o">-</span><span class="mi">2017</span><span class="n">q4</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">arm</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="n">eabi</span><span class="o">-</span><span class="n">g</span><span class="o">++</span> <span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">-</span><span class="n">E</span> \
</span></span><span class="line"><span class="cl"><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kate</span><span class="o">/.</span><span class="n">cache</span><span class="o">/</span><span class="n">arduino</span><span class="o">/</span><span class="n">sketches</span><span class="o">/</span><span class="n">D7CC1D7CA645BCFE67207C07A05B3A2A</span><span class="o">/</span><span class="n">sketch</span><span class="o">/</span><span class="n">MyBlink</span><span class="o">.</span><span class="n">ino</span><span class="o">.</span><span class="n">cpp</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>As we see in build output, the compiler is invoked with the <code>-E</code> flag, which tells it to stop after the preprocessing
stage and not produce any compiled output.</p>
<p>For a simple sketch like Blink, this stage isn&rsquo;t very exciting: it doesn&rsquo;t detect in any additional libraries.
That&rsquo;s why the build output doesn&rsquo;t show anything under <em>Detecting libraries used&hellip;</em>.
Open other example sketches, such as those from <strong>WiFiS3</strong> or <strong>EEPROM</strong>, and you&rsquo;ll see how more complex projects trigger detection of multiple libraries.</p>
<p><strong>Why does Arduino detect libraries automatically?</strong></p>
<p>The Arduino IDE compiles only the libraries that your sketch actually needs — no manual setup required.
In most other development environments, this step is up to the developer: you have to configure which libraries or dependencies should be included in the build.
Arduino takes care of this automatically, keeping things simple and beginner-friendly.</p>
<h3 id="generating-function-prototypes">Generating function prototypes</h3>
<p>The next stage in the build process is automatic function prototype generation. In C or C++, each function must be
either defined or declared before it&rsquo;s called. In Arduino, you don&rsquo;t need to worry about that — you can write functions
in any order, without adding their prototypes. How does it work? Arduino generates these prototypes for you!</p>
<p>Here’s what the build log shows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Generating function prototypes...
</span></span><span class="line"><span class="cl">arm-none-eabi-g++ (...) -E /home/kate/.cache/arduino/sketches/D7CC1D7CA645BCFE67207C07A05B3A2A/sketch/MyBlink.ino.cpp -o /tmp/1121713208/sketch_merged.cpp
</span></span><span class="line"><span class="cl">ctags (...) /tmp/1121713208/sketch_merged.cpp
</span></span></code></pre></td></tr></table>
</div>
</div><p>Again, the compiler is invoked with the <code>-E</code> flag, meaning only the preprocessor runs.
This is what happens now:</p>
<ol>
<li>
<p><strong>Preprocessing</strong></p>
<p>The <code>MyBlink.ino.cpp</code> (file concatenated of all <code>.ino</code> files) is input for the preprocessor: <code>#include</code>s are expanded and macros replaces.
The expanded file is stored as <code>/tmp/1121713208/sketch_merged.cpp</code>.</p>
</li>
<li>
<p><strong>Scanning functions</strong></p>
<p>Tool <code>ctags</code> is running over expanded <code>sketch_merged.cpp</code>, to extract function symbols.</p>
</li>
<li>
<p><strong>Generating prototypes</strong></p>
<p>Based on the <code>ctags</code> result, Arduino environment inserts forward declarations for you. This way, you don&rsquo;t need to worry
about undeclared functions, functions order, etc.</p>
</li>
<li>
<p><strong>Store prototypes into .ino.cpp</strong></p>
<p>The resulting version is stored into <code>MyBlink.ino.cpp</code>. This is what the compiler will actually use later on.</p>
</li>
</ol>
<p>Your simple sketch (<code>MyBlink.ino</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">delay</span><span class="p">(</span><span class="mi">6000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>gets transformed into (<code>MyBlink.ino.cpp</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#line 1 &#34;/home/kate/Arduino/MyBlink/MyBlink.ino&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#line 26 &#34;/home/kate/Arduino/MyBlink/MyBlink.ino&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">setup</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="cp">#line 32 &#34;/home/kate/Arduino/MyBlink/MyBlink.ino&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">loop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="cp">#line 26 &#34;/home/kate/Arduino/MyBlink/MyBlink.ino&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">delay</span><span class="p">(</span><span class="mi">6000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>To summarize differences:</p>
<ul>
<li><code>#include &lt;Arduino.h&gt;</code> is added,</li>
<li><code>#line</code> macros are added — they keep compiler error messages pointing to the right lines in your <code>.ino</code> file.
Without them, errors would show up with the line numbers of the generated <code>.cpp</code>, which would be super confusing.</li>
<li>function prototypes are added.</li>
</ul>
<h2 id="compilation">Compilation</h2>
<p>Here’s where your code finally turns into machine instructions that the microcontroller can execute.</p>
<h3 id="sketch-compilation">Sketch compilation</h3>
<p>During this step, the compiler checks your code for syntax errors and converts it
into the object code that can be linked with libraries later.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Compiling sketch...
</span></span><span class="line"><span class="cl">arm-none-eabi-g++ (...) -c sketch/MyBlink.ino.cpp -o sketch/MyBlink.ino.cpp.o
</span></span></code></pre></td></tr></table>
</div>
</div><p>Compiler is invoked with <code>-c</code> flag, which means compile only (and don’t link yet).</p>
<p><strong>Input:</strong> <code>MyBlink.ino.cpp</code> - the auto-generated sketch with prototypes, includes, and line directives.</p>
<p><strong>Output:</strong> <code>MyBlink.ino.cpp.o</code> - machine-code object file, ready to be linked later.</p>
<p>I shortened the compilation command, so it&rsquo;s not in the snippet above, but in IDE we can observe a lots of compilation flags that were used.
Some highlights:</p>
<ul>
<li><code>-Os</code> → optimize for size.</li>
<li><code>-g3</code> → include debug info at max level.</li>
<li><code>-fno-rtti</code>, <code>-fno-exceptions</code> → strip C++ runtime features to save space.</li>
<li><code>-nostdlib</code> → don’t link against standard system libraries <a href="https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html" target="_blank" rel="noopener noreffer ">[1]</a>.</li>
<li><code>-mcpu=cortex-m4 -mthumb -mfloat-abi=hard -mfpu=fpv4-sp-d16</code> → target an ARM Cortex-M4 with hardware floating point.</li>
<li><code>-I</code> and <code>@.../includes.txt</code> → add search paths for Arduino core and variant headers.</li>
<li>Many <code>-D...</code> → defines for board, CPU frequency, Arduino version, etc.</li>
</ul>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>Most advanced IDEs let you change compiler settings like optimization level, debug info, or extra flags right from a project menu.<br>
Arduino IDE is so simple that it doesn&rsquo;t offer this option: you don’t get a button or menu for that.</p>
<p>If you want to change some settings, you’ve got several ways:</p>
<ul>
<li><strong>Edit build recipes</strong>: you can change files like <code>platform.txt</code> or <code>boards.local.txt</code> to change or add your own compilation flags,</li>
<li><strong>modify <code>arduino-cli.yaml</code></strong> from <strong>ArduinoIDE</strong> folder,</li>
<li><strong>use Arduino CLI</strong> directly: the command-line tool gives you more flexibility and can build your sketch with whatever options you like.</li>
</ul>
</div>
        </div>
    </div>
<p>At this point, your sketch has been turned into machine code, stored in <code>MyBlink.ino.cpp.o</code>.
This file contains your <code>setup()</code> and <code>loop()</code> code, ready to be linked with the Arduino core and libraries in the next step.</p>
<h3 id="compiling-libraries">Compiling libraries</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Compiling</span> <span class="n">libraries</span><span class="p">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>For the Blink sketch this step is empty. In the previous phase (<em>Detecting libraries used</em>) no additional libraries were found.
Blink only relies on core Arduino functions such as <code>pinMode</code>, <code>digitalWrite</code>, and <code>delay</code>, which are part of the board core, not separate libraries.</p>
<p>In more advanced sketches the output looks different.
For example, in <strong>WiFiS3/ConnectWithWPA</strong> the <strong>WiFiS3</strong> library is detected and its source files are compiled here.</p>
<h3 id="compiling-core">Compiling core</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Compiling core...
</span></span><span class="line"><span class="cl">Using previously compiled file: /home/kate/.cache/arduino/sketches/D7CC1D7CA645BCFE67207C07A05B3A2A/core/tmp_gen_c_files/pin_data.c.o
</span></span><span class="line"><span class="cl">Using previously compiled file: /home/kate/.cache/arduino/sketches/D7CC1D7CA645BCFE67207C07A05B3A2A/core/tmp_gen_c_files/main.c.o
</span></span><span class="line"><span class="cl">Using previously compiled file: /home/kate/.cache/arduino/sketches/D7CC1D7CA645BCFE67207C07A05B3A2A/core/tmp_gen_c_files/common_data.c.o
</span></span><span class="line"><span class="cl">Using previously compiled file: /home/kate/.cache/arduino/sketches/D7CC1D7CA645BCFE67207C07A05B3A2A/core/variant.cpp.o
</span></span><span class="line"><span class="cl">Using precompiled core: /home/kate/.cache/arduino/cores/arduino_renesas_uno_unor4wifi_4e1bf6711f2b98688d9a4a386931d6dc/core.a
</span></span></code></pre></td></tr></table>
</div>
</div><p>The core is the foundation of every Arduino program.
We disussed in in <a href="#arduino-core" rel="">Arduino core</a> chapter. Instead of recompiling the same core files every time you build,
the Arduino IDE uses precompiled objects from a cache. It speeds up the compilation.</p>
<h2 id="linking-everything-together">Linking everything together</h2>
<p>Once all the individual files are compiled, the Arduino build system needs to link them into a single program.
I shortened the link command to present only the most important stuff:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">arm-none-eabi-g++ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -mcpu<span class="o">=</span>cortex-m4 -mfloat-abi<span class="o">=</span>hard -mfpu<span class="o">=</span>fpv4-sp-d16 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -o MyBlink.ino.elf <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  MyBlink.ino.cpp.o common_data.c.o main.c.o pin_data.c.o variant.cpp.o <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  libfsp.a core.a <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -lstdc++ -lsupc++ -lm -lc -lgcc -lnosys
</span></span></code></pre></td></tr></table>
</div>
</div><p>After this step, the final binary will be <code>MyBlink.ino.elf</code>.</p>
<p>Please note which libraries are linked into the build:</p>
<ul>
<li><code>libfsp.a</code> → the Renesas Flexible Software Package, providing hardware drivers and low-level functions for peripherals.</li>
<li><code>core.a</code> → the Arduino core for this board.
Libraries above are board support libraries. These are part of the Arduino board package (for the Uno R4 in this case).
They are not optional user libraries, so they don’t appear in the detection phase.</li>
</ul>
<p>Toolchain standard libraries:</p>
<ul>
<li><code>-lstdc++</code> → the C++ standard library,</li>
<li><code>-lsupc++</code> → low-level C++ runtime support,</li>
<li><code>-lm</code> → the math library,</li>
<li><code>-lc</code> → the standard C library,</li>
<li><code>-lgcc</code> → helper routines from GCC itself,</li>
<li><code>-lnosys</code> → stubs for system calls.</li>
</ul>
<h2 id="finalizing-build">Finalizing build</h2>
<h3 id="creating-binary-and-hex-files">Creating binary and hex files</h3>
<p>After the ELF file (<code>MyBlink.ino.elf</code>) is created, the build system uses <code>objcopy</code> to generate <code>hex</code> and <code>bin</code> formats:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">arm-none-eabi-objcopy -O binary -j .text -j .data MyBlink.ino.elf MyBlink.ino.bin
</span></span><span class="line"><span class="cl">arm-none-eabi-objcopy -O ihex   -j .text -j .data MyBlink.ino.elf MyBlink.ino.hex
</span></span></code></pre></td></tr></table>
</div>
</div><p>Both formats contain the same program, just encoded differently for different flashing tools.</p>
<h3 id="measuring-the-program-size">Measuring the program size</h3>
<p>Finally, the build system reports memory usage with <code>arm-none-eabi-size</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">arm-none-eabi-size -A MyBlink.ino.elf
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="cleaning-the-build">Cleaning the build</h3>
<p>Unfortunately, Arduino IDE does not offer the <code>Clean build</code> or <code>Force rebuild</code> option (<a href="https://forum.arduino.cc/t/feature-request-clean-build-option/1291789" target="_blank" rel="noopener noreffer ">[1]</a>,
<a href="https://forum.arduino.cc/t/can-i-force-the-arduino-ide-to-recompile-everything/866547" target="_blank" rel="noopener noreffer ">[2]</a>,
<a href="https://github.com/arduino/arduino-ide/issues/419" target="_blank" rel="noopener noreffer ">[3]</a>). The workaround for it is to manually delete the cached build directories we mentioned earlier.</p>
<h2 id="more-reading">More reading</h2>
<ol>
<li><a href="https://docs.arduino.cc/arduino-cli/sketch-build-process/" target="_blank" rel="noopener noreffer ">Build Sketch Process from docs.arduino.cc</a></li>
<li><a href="https://support.arduino.cc/hc/en-us/articles/4415103213714-Find-sketches-libraries-board-cores-and-other-files-on-your-computer" target="_blank" rel="noopener noreffer ">Find sketches, libraries, board cores and other files on your computer from support.arduino.cc</a></li>
<li><a href="https://github.com/microbuilder/armreveng/blob/main/compilation.md" target="_blank" rel="noopener noreffer ">ARM Reverse Engineering Notes: Compilation</a></li>
<li><a href="https://github.com/arduino/arduino-cli/issues?q=state%3Aopen%20label%3A%22topic%3A%20build-process%22" target="_blank" rel="noopener noreffer ">Open issues in arduino-cli related to build process</a></li>
<li><a href="https://www.youtube.com/watch?v=7vLjK9t-uZY" target="_blank" rel="noopener noreffer ">De-Mystifying Libraries - How Arduino IDE Finds and Uses Your Files - OhioIoT</a></li>
</ol></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2025-10-20&nbsp;<a class="git-hash" href="https://github.com/embeddedk8/embeddedk8.github.io/commit/c544c8269d57bb777c1bbf2bf99d5fc551895844" target="_blank" title="commit by Katarzyna Zalewska(embeddedkate@gmail.com) c544c8269d57bb777c1bbf2bf99d5fc551895844: Update">
                                    <i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>c544c82</a></span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/arduino-ide-build-process/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://embeddedk8.com/arduino-ide-build-process/" data-title="Arduino Internals: how Arduino IDE builds your code" data-via="EmbeddedKate" data-hashtags="Arduino Internals"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://embeddedk8.com/arduino-ide-build-process/" data-hashtag="Arduino Internals"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://embeddedk8.com/arduino-ide-build-process/" data-title="Arduino Internals: how Arduino IDE builds your code"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://embeddedk8.com/arduino-ide-build-process/" data-title="Arduino Internals: how Arduino IDE builds your code"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://embeddedk8.com/arduino-ide-build-process/" data-title="Arduino Internals: how Arduino IDE builds your code"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/arduino-internals/">Arduino Internals</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
            <a href="/arduino-cli-compilation/" class="next" rel="next" title="Arduino Internals: building sketches with Arduino CLI">Arduino Internals: building sketches with Arduino CLI<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="giscus" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app">Giscus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.151.1">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://embeddedk8.com/" target="_blank">embeddedk8</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{"giscus":{"category":"Announcements","categoryId":"DIC_kwDOPvP-is4CwE3r","darkTheme":"dark","emitMetadata":"0","inputPosition":"bottom","lang":"en","lazyLoading":false,"lightTheme":"light","mapping":"pathname","reactionsEnabled":"1","repo":"embeddedk8/embeddedk8.github.io","repoId":"R_kgDOPvP-ig"}},"lightgallery":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"","algoliaIndex":"index.en","algoliaSearchKey":"","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-WMKZ5G9QL5', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-WMKZ5G9QL5" async></script>
<script type="text/javascript">
var sc_project=13166912;
var sc_invisible=1;
var sc_security="b5be05e2";
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js" async></script>
<noscript><div class="statcounter"><a title="Web Analytics Made Easy -
Statcounter" href="https://statcounter.com/" target="_blank"><img
class="statcounter" src="https://c.statcounter.com/13166912/0/b5be05e2/1/"
alt="Web Analytics Made Easy - Statcounter"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>



<script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>

    </body>
</html>
